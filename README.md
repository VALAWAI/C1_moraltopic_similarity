# C1_moraltopic_similarity

The module contains the function that calculates the weighted similarity between an item vector and a user vector (*moraltopic_similarity*). The similarity is the weighted average of cosine similarity between moral vectors (weighted with *moral_weight*) and topic vectors (*1 -  moral_weight*). Both parts of the item vector can be modified by adding some noise, controlled respectively by *moral_noise* and *topic_noise*. The noisy version of topics is generated by the *noisize* function. Noise follows a Dirichlet distribution, which tends to a uniform distribution as the *noiseparameter* grows. *0* will leave the vector as it is, *10* will make the vector almost uniformly distributed in the simplex. The module contains a Flask app that computes the moral-topic similarity value. To launch the module as a server, the following snippet can be used:

    from moraltopic_similarity import create_app

    if __name__ == '__main__':
        app = create_app()
        app . run ( )

A working example is reported in the *example.py* file. In the example, a server is launched in a fork process to listen on port *127.0.0.1:5000*, while another process sends a message with the four vectors (*user_moral*, *user_topic*, *item_moral*, *item_topic*). A message with the calculated similarity (*float*) is received as an answer to the request.
